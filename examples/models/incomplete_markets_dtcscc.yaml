model_type: dtcscc

name: incomplete_markets

symbols:
    states: [ k, e]
    controls: [c]
    shocks: [eps_e]
    expectations: [m]
    rewards: [u]
    parameters: [beta,sigma,alpha,delta,lbar,a,mu,Lbar,Lb,Lg,kagg,y,w,r,tau,DeltaA,ub,ug, sig_e, rho_e, sig_eun]

equations:

    transition:
        - k = k(-1)*(1+r-delta) + lbar*exp(e(-1))*w - c(-1)
        - e = rho_e*e(-1) + eps_e
        # - e = tanh(rho_e*e(-1)/sig_eun + eps_e)*sig_eun
    # transition_inv:
    #     - c = k*(1+r-delta) + ((1-tau)*lbar*exp(e) + mu*(1-exp(e)))*w - k(+1)
    arbitrage:
        - 1 = beta*(c(1)/c)^(-sigma)*(1 + r - delta)  |   0 <= c <= k*(1+r-delta) + lbar*exp(e)*w
    expectation:
        - m = beta/c(1)^sigma*(1-delta+r)
    direct_response:
        - c = m^(-1/sigma)
        # - i = z*k^alpha*n^(1-alpha) - (m)^(-1/sigma)

    felicity:
        - u = c^(1-sigma)/(1-sigma)

calibration:

    beta: 0.99
    sigma: 2
    alpha: 0.36
    delta: 0.025
    lbar: 0.9
    a: 1
    mu: 0.15
    ub: 0.1
    ug: 0.04
    Lb: 1 - ub
    Lg: 1 - ug
    DeltaA: 0.01
    r: (1/beta - 1 + delta) - DeltaA
    kagg: lbar*Lbar*(r/(a*alpha))^(1/(alpha-1))
    k: kagg
    c: y - delta*kagg
    e: 1.0
    eps_e: 0.0
    rho_e: 0.85
    sig_e: ((1 - rho_e^2)*2*log(1/lbar))^(1/2)
    Lbar: exp(1/2*sig_e^2/(1-rho_e^2))
    y: a*kagg^alpha*(lbar*Lbar)^alpha
    w: a*(1-alpha)*(kagg/(lbar*Lbar))^alpha
    # r: a*alpha*(kagg/(lbar*Lbar))^(alpha - 1)

    tau: mu*ub/(lbar*Lbar)
    sig_eun: 3*sig_e/sqrt(1 - rho_e^2)
    m: c^(-sigma)

options:

    distribution: !Normal
        sigma: [ [ sig_e**2] ]

    grid: !Cartesian
        a: [0.0, -sig_eun]
        b: [150.0, sig_eun]
        orders: [20, 20]
